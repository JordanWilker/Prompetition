(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3afb6090"],{2016:function(e,t,a){},"298d":function(e,t,a){"use strict";a.r(t);var s=a("7a23");const c=Object(s["G"])("data-v-7c35ba64");Object(s["u"])("data-v-7c35ba64");const o={class:"row w-100 d-flex"},i={class:"col-sm-6"},n={class:"row"},p={class:"col-12"},l={key:0,class:"mb-4"},d={key:1},r={class:"row"},b={class:"col-12"},y={key:0},m={class:"row"},j={class:"col-12"},h={class:"row d-flex justify-content-evenly pr-3"},u={class:"col-sm pr-0"},O=Object(s["h"])("div",{class:"col-sm-1 px-0"},[Object(s["h"])("button",{type:"submit",class:"btn btn-primary h-100 w-100"},[Object(s["h"])("i",{class:"fa fa-plus","aria-hidden":"true"})])],-1);Object(s["s"])();const g=c((e,t,a,c,g,w)=>(Object(s["r"])(),Object(s["d"])("div",o,[Object(s["h"])("div",i,[Object(s["h"])("div",n,[Object(s["h"])("div",p,["Daily-Challenge"===c.route.name?(Object(s["r"])(),Object(s["d"])("h3",l,Object(s["A"])(c.state.todaysTopic.body),1)):c.state.topics[0]?(Object(s["r"])(),Object(s["d"])("h3",d,Object(s["A"])(c.state.topics.filter(e=>e.id===c.route.params.topicId)[0].body||"placeholder"),1)):Object(s["e"])("",!0)])]),Object(s["h"])("div",r,[Object(s["h"])("div",b,[c.state.timeLeft&&"Daily-Challenge"===c.route.name?(Object(s["r"])(),Object(s["d"])("div",y,Object(s["A"])("Time Remaining: "+new Date(c.state.timeLeft).toLocaleTimeString()),1)):Object(s["e"])("",!0)])]),Object(s["h"])("div",m,[Object(s["h"])("div",j,[Object(s["h"])("form",{onSubmit:t[2]||(t[2]=Object(s["F"])((...e)=>c.submitResponse&&c.submitResponse(...e),["prevent"]))},[Object(s["h"])("div",h,[Object(s["h"])("div",u,[Object(s["E"])(Object(s["h"])("textarea",{name:"topicResponse","onUpdate:modelValue":t[1]||(t[1]=e=>c.state.submission=e),class:"rounded",placeholder:"Write Response Here..."},"yo yo yo",512),[[s["C"],c.state.submission]])]),O])],32)])])])])));var w=a("83fc"),v=a("6c02"),f=a("8df8"),T=a("a838"),D={name:"Write",setup(){const e=Object(v["c"])(),t=Object(v["d"])(),a=Object(s["v"])({todaysTopic:Object(s["b"])(()=>w["a"].todaysTopic),activeTopic:Object(s["b"])(()=>w["a"].activeTopic),submission:"",isDailyChallenge:!1,startDate:Object(s["b"])(()=>w["a"].todaysTopic.challengeStartDate),submissionEndDate:Object(s["b"])(()=>w["a"].todaysTopic.challengeStartDate+864e5),timeLeft:0,topics:Object(s["b"])(()=>w["a"].topics)}),c=setInterval(o,1e3);function o(){a.timeLeft=Object(s["b"])(()=>w["a"].todaysTopic.challengeStartDate+864e5-new Date),a.timeLeft<0?(window.alert("Submission period has ended"),clearInterval(c)):a.timeLeft<6e4&&window.alert("Time's almost up!")}return Object(s["p"])(async()=>{"Daily-Challenge"===e.name?(await f["a"].getTodaysTopic(),await T["a"].getDailyChallengeResponse(),a.isDailyChallenge=!0):(await f["a"].getTopicById(e.params.topicId),await T["a"].getResponsesByTopicId(e.params.topicId),a.isDailyChallenge=!1),logger.log(w["a"].topics),w["a"].topics[0]||await f["a"].getTopics(),logger.log("My Response:",w["a"].myResponse),a.submission=w["a"].myResponse?w["a"].myResponse.body:""}),{state:a,route:e,submitResponse(){const s={body:a.submission,topicId:e.params.topicId,votes:0};a.isDailyChallenge&&(s.topicId=a.todaysTopic.id),w["a"].myResponse?T["a"].editResponse(s):T["a"].createResponse(s),a.isDailyChallenge?(t.push({name:"Home"}),window.alert("Please wait for the response period to end to begin voting")):t.push({name:"Responses",topicId:e.params.topicId})}}}};a("7085");D.render=g,D.__scopeId="data-v-7c35ba64";t["default"]=D},7085:function(e,t,a){"use strict";a("2016")},"8df8":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a("83fc"),c=a("9f2e"),o=a("8a4e"),i=a("2b20");class n{async getTopics(){try{const e=await i["a"].get("api/topics");s["a"].topics=e.data.map(e=>new c["a"](e))}catch(e){o["a"].error("Couldnt retrieve topics \n",e)}}async getTodaysTopic(){try{const e=await i["a"].get("api/topics/dailyChallenge");s["a"].todaysTopic=new c["a"](e.data),s["a"].activeTopic=s["a"].todaysTopic}catch(e){o["a"].error(e)}}async getTopicById(e){try{const t=await i["a"].get("api/topics/"+e);s["a"].activeTopic=new c["a"](t.data[0])}catch(t){o["a"].error(t)}}}const p=new n}}]);